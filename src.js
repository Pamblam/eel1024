let l,f=0,h=[...Array(5)].map((t,e)=>[e+5,5]),r=0,d=20,n=250,o=0,i=Math.floor,g=(t,e,i)=>{c.fillStyle=i||"#0040ff",c.fillRect(t*d,e*d,d,d)},e=(t,e)=>i(Math.random()*(e-t+1)+t),s=(i,l)=>h.filter(([t,e])=>t===i&&e===l),y=t=>{l=[e(0,i(a.width/d)-1),e(0,i(a.height/d)-1)],s(...l).length&&y()},u=t=>{h.shift();let[e,i]=h.at(-1);r||e++,1==r&&i++,2==r&&e--,3==r&&i--,h.push([e,i]),f=1,c.clearRect(0,0,a.width,a.height),c.fillStyle="#40ff76",c.fillRect(0,0,a.width,a.height),g(...l,"red"),h.forEach(t=>g(...t))},w=t=>{var[e,i]=h.at(-1);if(e*d>a.width||i*d>a.height||e<0||i<0)return 1;if(1<s(e,i).length)return 1;if(e===l[0]&&i===l[1]){o++,y(),n*=.8;let[t,e]=h[0];0===r&&t--,1===r&&e--,2===r&&t++,3===r&&e++,h.unshift([t,e])}},S=t=>{l||y(),u(),w()?(c.fillStyle="#000",c.fillText("Score: "+o,50,50)):setTimeout(S,n)};c.font="48px serif";addEventListener("keydown",t=>{f&&(f=0,37===(t=t.keyCode)&&0!==r&&(r=2),39===t&&2!==r&&(r=0),38===t&&1!==r&&(r=3),40===t)&&3!==r&&(r=1)}),S();